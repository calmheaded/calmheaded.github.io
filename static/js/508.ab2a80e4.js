"use strict";(self.webpackChunkthree_model_viewer=self.webpackChunkthree_model_viewer||[]).push([[508],{508:function(e,t,r){r.r(t),r.d(t,{STLLoader:function(){return n}});var a=r(216);class n extends a.aNw{constructor(e){super(e)}load(e,t,r,n){const o=this;var l=new a.hH6(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(r){try{t(o.parse(r))}catch(r){n&&n(r),o.manager.itemError(e)}}),r,n)}parse(e){var t=function(e){if("string"!=typeof e)return e;var t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer||t}(e);if(function(e){var t=new DataView(e);e=84+50*t.getUint32(80,!0);if(e!==t.byteLength){var r=[115,111,108,105,100];for(let e=0;e<5;e++)if(function(e,t,r){for(let a=0,n=e.length;a<n;a++)if(e[a]!==t.getUint8(r+a))return;return 1}(r,t,e))return}return 1}(t)){var r=new DataView(t),n=r.getUint32(80,!0);let e,c,h,d,v,F,y,U,x=!1;for(let t=0;t<70;t++)1129270351==r.getUint32(t,!1)&&82==r.getUint8(t+4)&&61==r.getUint8(t+5)&&(x=!0,d=new Float32Array(3*n*3),v=r.getUint8(t+6)/255,F=r.getUint8(t+7)/255,y=r.getUint8(t+8)/255,U=r.getUint8(t+9)/255);t=new a.u9r;var o=new Float32Array(3*n*3),l=new Float32Array(3*n*3);for(let t=0;t<n;t++){var s,i=84+50*t,u=r.getFloat32(i,!0),f=r.getFloat32(4+i,!0),g=r.getFloat32(8+i,!0);x&&(s=r.getUint16(48+i,!0),h=0==(32768&s)?(e=(31&s)/31,c=(s>>5&31)/31,(s>>10&31)/31):(e=v,c=F,y));for(let a=1;a<=3;a++){var p=i+12*a,w=3*t*3+3*(a-1);o[w]=r.getFloat32(p,!0),o[1+w]=r.getFloat32(4+p,!0),o[2+w]=r.getFloat32(8+p,!0),l[w]=u,l[1+w]=f,l[2+w]=g,x&&(d[w]=e,d[1+w]=c,d[2+w]=h)}}return t.setAttribute("position",new a.TlE(o,3)),t.setAttribute("normal",new a.TlE(l,3)),x&&(t.setAttribute("color",new a.TlE(d,3)),t.hasColors=!0,t.alpha=U),t}{var c="string"!=typeof(t=e)?a.Zp0.decodeText(new Uint8Array(t)):t,h=new a.u9r,d=/solid([\s\S]*?)endsolid/g,v=/facet([\s\S]*?)endfacet/g;let r=0;e=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source;var F=new RegExp("vertex"+e+e+e,"g"),y=new RegExp("normal"+e+e+e,"g"),U=[],x=[],A=new a.Pa4;let n,o=0,l=0;for(;null!==(n=d.exec(c));){for(var b=l,m=n[0];null!==(n=v.exec(m));){let e=0,t=0;for(var E=n[0];null!==(n=y.exec(E));)A.x=parseFloat(n[1]),A.y=parseFloat(n[2]),A.z=parseFloat(n[3]),t++;for(;null!==(n=F.exec(E));)U.push(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])),x.push(A.x,A.y,A.z),e++,l++;r++}var C=l-b;h.addGroup(b,C,o),o++}return h.setAttribute("position",new a.a$l(U,3)),h.setAttribute("normal",new a.a$l(x,3)),h}}}}}]);