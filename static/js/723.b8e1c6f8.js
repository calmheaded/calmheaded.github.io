"use strict";(self["webpackChunkthree_model_viewer"]=self["webpackChunkthree_model_viewer"]||[]).push([[723],{6723:function(t,e,s){s.r(e),s.d(e,{MD2Loader:function(){return o}});var n=s(277);const r=[[-.525731,0,.850651],[-.442863,.238856,.864188],[-.295242,0,.955423],[-.309017,.5,.809017],[-.16246,.262866,.951056],[0,0,1],[0,.850651,.525731],[-.147621,.716567,.681718],[.147621,.716567,.681718],[0,.525731,.850651],[.309017,.5,.809017],[.525731,0,.850651],[.295242,0,.955423],[.442863,.238856,.864188],[.16246,.262866,.951056],[-.681718,.147621,.716567],[-.809017,.309017,.5],[-.587785,.425325,.688191],[-.850651,.525731,0],[-.864188,.442863,.238856],[-.716567,.681718,.147621],[-.688191,.587785,.425325],[-.5,.809017,.309017],[-.238856,.864188,.442863],[-.425325,.688191,.587785],[-.716567,.681718,-.147621],[-.5,.809017,-.309017],[-.525731,.850651,0],[0,.850651,-.525731],[-.238856,.864188,-.442863],[0,.955423,-.295242],[-.262866,.951056,-.16246],[0,1,0],[0,.955423,.295242],[-.262866,.951056,.16246],[.238856,.864188,.442863],[.262866,.951056,.16246],[.5,.809017,.309017],[.238856,.864188,-.442863],[.262866,.951056,-.16246],[.5,.809017,-.309017],[.850651,.525731,0],[.716567,.681718,.147621],[.716567,.681718,-.147621],[.525731,.850651,0],[.425325,.688191,.587785],[.864188,.442863,.238856],[.688191,.587785,.425325],[.809017,.309017,.5],[.681718,.147621,.716567],[.587785,.425325,.688191],[.955423,.295242,0],[1,0,0],[.951056,.16246,.262866],[.850651,-.525731,0],[.955423,-.295242,0],[.864188,-.442863,.238856],[.951056,-.16246,.262866],[.809017,-.309017,.5],[.681718,-.147621,.716567],[.850651,0,.525731],[.864188,.442863,-.238856],[.809017,.309017,-.5],[.951056,.16246,-.262866],[.525731,0,-.850651],[.681718,.147621,-.716567],[.681718,-.147621,-.716567],[.850651,0,-.525731],[.809017,-.309017,-.5],[.864188,-.442863,-.238856],[.951056,-.16246,-.262866],[.147621,.716567,-.681718],[.309017,.5,-.809017],[.425325,.688191,-.587785],[.442863,.238856,-.864188],[.587785,.425325,-.688191],[.688191,.587785,-.425325],[-.147621,.716567,-.681718],[-.309017,.5,-.809017],[0,.525731,-.850651],[-.525731,0,-.850651],[-.442863,.238856,-.864188],[-.295242,0,-.955423],[-.16246,.262866,-.951056],[0,0,-1],[.295242,0,-.955423],[.16246,.262866,-.951056],[-.442863,-.238856,-.864188],[-.309017,-.5,-.809017],[-.16246,-.262866,-.951056],[0,-.850651,-.525731],[-.147621,-.716567,-.681718],[.147621,-.716567,-.681718],[0,-.525731,-.850651],[.309017,-.5,-.809017],[.442863,-.238856,-.864188],[.16246,-.262866,-.951056],[.238856,-.864188,-.442863],[.5,-.809017,-.309017],[.425325,-.688191,-.587785],[.716567,-.681718,-.147621],[.688191,-.587785,-.425325],[.587785,-.425325,-.688191],[0,-.955423,-.295242],[0,-1,0],[.262866,-.951056,-.16246],[0,-.850651,.525731],[0,-.955423,.295242],[.238856,-.864188,.442863],[.262866,-.951056,.16246],[.5,-.809017,.309017],[.716567,-.681718,.147621],[.525731,-.850651,0],[-.238856,-.864188,-.442863],[-.5,-.809017,-.309017],[-.262866,-.951056,-.16246],[-.850651,-.525731,0],[-.716567,-.681718,-.147621],[-.716567,-.681718,.147621],[-.525731,-.850651,0],[-.5,-.809017,.309017],[-.238856,-.864188,.442863],[-.262866,-.951056,.16246],[-.864188,-.442863,.238856],[-.809017,-.309017,.5],[-.688191,-.587785,.425325],[-.681718,-.147621,.716567],[-.442863,-.238856,.864188],[-.587785,-.425325,.688191],[-.309017,-.5,.809017],[-.147621,-.716567,.681718],[-.425325,-.688191,.587785],[-.16246,-.262866,.951056],[.442863,-.238856,.864188],[.16246,-.262866,.951056],[.309017,-.5,.809017],[.147621,-.716567,.681718],[0,-.525731,.850651],[.425325,-.688191,.587785],[.587785,-.425325,.688191],[.688191,-.587785,.425325],[-.955423,.295242,0],[-.951056,.16246,.262866],[-1,0,0],[-.850651,0,.525731],[-.955423,-.295242,0],[-.951056,-.16246,.262866],[-.864188,.442863,-.238856],[-.951056,.16246,-.262866],[-.809017,.309017,-.5],[-.864188,-.442863,-.238856],[-.951056,-.16246,-.262866],[-.809017,-.309017,-.5],[-.681718,.147621,-.716567],[-.681718,-.147621,-.716567],[-.850651,0,-.525731],[-.688191,.587785,-.425325],[-.587785,.425325,-.688191],[-.425325,.688191,-.587785],[-.425325,-.688191,-.587785],[-.587785,-.425325,-.688191],[-.688191,-.587785,-.425325]];class o extends n.aNw{constructor(t){super(t)}load(t,e,s,r){const o=this,i=new n.hH6(o.manager);i.setPath(o.path),i.setResponseType("arraybuffer"),i.setRequestHeader(o.requestHeader),i.setWithCredentials(o.withCredentials),i.load(t,(function(s){try{e(o.parse(s))}catch(n){r?r(n):console.error(n),o.manager.itemError(t)}}),s,r)}parse(t){const e=new DataView(t),s={},o=["ident","version","skinwidth","skinheight","framesize","num_skins","num_vertices","num_st","num_tris","num_glcmds","num_frames","offset_skins","offset_st","offset_tris","offset_frames","offset_glcmds","offset_end"];for(let n=0;n<o.length;n++)s[o[n]]=e.getInt32(4*n,!0);if(844121161!==s.ident||8!==s.version)return void console.error("Not a valid MD2 file");if(s.offset_end!==e.byteLength)return void console.error("Corrupted MD2 file");const i=new n.u9r,a=[];let l=s.offset_st;for(let n=0,r=s.num_st;n<r;n++){const t=e.getInt16(l+0,!0),n=e.getInt16(l+2,!0);a.push(t/s.skinwidth,1-n/s.skinheight),l+=4}l=s.offset_tris;const c=[],f=[];for(let n=0,r=s.num_tris;n<r;n++)c.push(e.getUint16(l+0,!0),e.getUint16(l+2,!0),e.getUint16(l+4,!0)),f.push(e.getUint16(l+6,!0),e.getUint16(l+8,!0),e.getUint16(l+10,!0)),l+=12;const u=new n.Pa4,h=new n.Pa4,m=[];l=s.offset_frames;for(let n=0,U=s.num_frames;n<U;n++){h.set(e.getFloat32(l+0,!0),e.getFloat32(l+4,!0),e.getFloat32(l+8,!0)),u.set(e.getFloat32(l+12,!0),e.getFloat32(l+16,!0),e.getFloat32(l+20,!0)),l+=24;const t=[];for(let s=0;s<16;s++){const n=e.getUint8(l+s);if(0===n)break;t[s]=n}const n={name:String.fromCharCode.apply(null,t),vertices:[],normals:[]};l+=16;for(let o=0;o<s.num_vertices;o++){let t=e.getUint8(l++),s=e.getUint8(l++),o=e.getUint8(l++);const i=r[e.getUint8(l++)];t=t*h.x+u.x,s=s*h.y+u.y,o=o*h.z+u.z,n.vertices.push(t,o,s),n.normals.push(i[0],i[2],i[1])}m.push(n)}const g=[],p=[],d=[],_=m[0].vertices,v=m[0].normals;for(let n=0,r=c.length;n<r;n++){const t=c[n];let e=3*t;const s=_[e],r=_[e+1],o=_[e+2];g.push(s,r,o);const i=v[e],l=v[e+1],u=v[e+2];p.push(i,l,u);const h=f[n];e=2*h;const m=a[e],w=a[e+1];d.push(m,w)}i.setAttribute("position",new n.a$l(g,3)),i.setAttribute("normal",new n.a$l(p,3)),i.setAttribute("uv",new n.a$l(d,2));const w=[],k=[];for(let r=0,U=m.length;r<U;r++){const t=m[r],e=t.name;if(t.vertices.length>0){const s=[];for(let e=0,n=c.length;e<n;e++){const n=c[e],r=3*n,o=t.vertices[r],i=t.vertices[r+1],a=t.vertices[r+2];s.push(o,i,a)}const r=new n.a$l(s,3);r.name=e,w.push(r)}if(t.normals.length>0){const s=[];for(let e=0,n=c.length;e<n;e++){const n=c[e],r=3*n,o=t.normals[r],i=t.normals[r+1],a=t.normals[r+2];s.push(o,i,a)}const r=new n.a$l(s,3);r.name=e,k.push(r)}}return i.morphAttributes.position=w,i.morphAttributes.normal=k,i.morphTargetsRelative=!1,i.animations=n.m7l.CreateClipsFromMorphTargetSequences(m,10),i}}}}]);
//# sourceMappingURL=723.b8e1c6f8.js.map